<!DOCTYPE html>
<html>
  <head>
    <title>Substack Notes Share Link Generator</title>
    <!-- Icons -->
    <link rel="stylesheet" href="https://mirojones.github.io/notes/style.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <style>
      .material-symbols-outlined {
        font-variation-settings:
        'FILL' 0,
        'wght' 400,
        'GRAD' 0,
        'opsz' 48
      }
    </style>
  </head>
  <body>
    <header>
      <h1 onclick="window.location.reload();">Substack Notes Share Link Generator</h1>
      <span>A tool by Miro Jones</span>
    </header>
    <main>
      <textarea id="noteInput" form="note" placeholder="Your note" rows="6"></textarea>
      <br>
      <button id="encodeButton">Generate</button>
      <br>
      <textarea id="outputURL" readonly placeholder="Your link will appear here"></textarea>
      <span class="material-symbols-outlined" onclick="copyLink()">content_copy</span>
    </main>
    <footer>
      <p>&copy; Miro Jones</p>
    </footer>
    <script>
      const textInput = document.getElementById("noteInput");
      const encodedText = document.getElementById("outputURL");
      const encodeButton = document.getElementById("encodeButton");

      encodeButton.addEventListener("click", function() {
        const inputValue = textInput.value;
        const encodedValue = encodeURIComponent(inputValue);
        encodedText.value = 'https://substack.com/home?action=compose&message=' + encodedValue;
      });

      // Copy to clipboard
      function copyLink() {
        // Get the text field
        var copyText = document.getElementById("outputURL");

        // Select the text field
        copyText.select();
        copyText.setSelectionRange(0, 99999); // For mobile devices

        // Copy the text inside the text field
        navigator.clipboard.writeText(copyText.value);

        // Alert the copied text
        alert("Link copied");
      }
    </script>
  </body>
</html>
