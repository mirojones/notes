<!DOCTYPE html>
<html>
  <head>
    <title>Substack Notes Share Link Generator</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#f36e32">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://mirojones.github.io/notes/style.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <style>
      .material-symbols-outlined {
        font-variation-settings:
        'FILL' 0,
        'wght' 400,
        'GRAD' 0,
        'opsz' 48
      }
    </style>
  </head>
  <body>
    <header>
      <h1 onclick="window.location.reload();">Substack Notes Share Link Generator</h1>
      <span>A tool by <a href="https://mirojones.github.io">Miro Jones</a>.</span>
    </header>
    <main>
      <hr>
      <p>This link will open <a href="https://substack.com">Substack</a> and prefill a Note with your text. Use <kbd>@</kbd> to mention users.</p>
      <p>The link will not work if the user is not signed in.</p>
      <textarea id="noteInput" form="note" placeholder="Your note" rows="6"></textarea>
      <br>
      <button id="encodeButton">Generate</button>
      <br>
      <textarea id="outputURL" rows="1" readonly placeholder="Your link will appear here"></textarea>
      <span class="material-symbols-outlined" onclick="copyLink()">content_copy</span>
      <hr>
      <h2>Demo</h2>
      <p>Here's an <a href="#">example link</a> that contains the text:</p>
      <p>Check out this Notes share link generator by @mirojones<br>https://mirojones.github.io/notes</p>
    </main>
    <footer>
      <p>&copy; 2024 Miro Jones. This site is not affiliated with Substack, Inc.</p>
    </footer>
    <script>
      const textInput = document.getElementById("noteInput");
      const encodedText = document.getElementById("outputURL");
      const encodeButton = document.getElementById("encodeButton");

      encodeButton.addEventListener("click", function() {
        const inputValue = textInput.value;
        const encodedValue = encodeURIComponent(inputValue);
        encodedText.value = 'https://substack.com/home?action=compose&message=' + encodedValue;
      });

      // Copy to clipboard
      function copyLink() {
        // Get the text field
        var copyText = document.getElementById("outputURL");

        // Select the text field
        copyText.select();
        copyText.setSelectionRange(0, 99999); // For mobile devices

        // Copy the text inside the text field
        navigator.clipboard.writeText(copyText.value);

        // Alert the copied text
        alert("Link copied");
      }
    </script>
  </body>
</html>
