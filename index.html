<!DOCTYPE html>
<html lang="en-AU">
  <head>
    <title>Notes Link Generator</title>

		<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- metadata -->
    <meta property="og:title" content="Notes Share Link Generator">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://mirojones.github.io/notes">
    <meta property="og:image" content="socialpreview.png">

		<style>
			
		</style>
  </head>
  <body>
    <header>
      <h1>Substack Notes Link Generator</h1>
			<p>Generate links to prefill a Substack Note with your message. Useful for sharing your website or project.</p>
      <p>A tool by <a href="https://miro.boats" target="_blank" rel="author">Miro Jones</a>.</p>
    </header>
		<hr>
    <main>
			<p>Enter your message to generate a link to a <a href="https://substack.com" target="_blank" rel="noopener noreferrer">Substack</a> Note prefilled with your text. Use <kbd>@</kbd> to mention users.</p>
			<textarea id="input" placeholder="Your note" rows="6"></textarea>
			<output id="output">Your link will appear here</output>
			<button id="copy">Copy link</button>
			<a id="open">Open link</a>
    </main>
    <footer>
      <hr>
			<p>This site is open source. <a href="https://github.com/mirojones/notes">View on GitHub</a>.</p>
      <p><small>This site is not affiliated with <a href="https://substack.com/about" rel="nofollow">Substack Inc</a>. 'Substack' and the Substack logo are trademarks of Substack Inc. Please note that this technique of linking to Notes is not officially supported by Substack, and may stop working at any time.</small></p>
    </footer>
    <script>
      const input = document.getElementById("input"),
				output = document.getElementById("output"),
				copy = document.getElementById("copy"),
				open = document.getElementById("open");

      input.addEventListener("input", () => {
        output.value = 'https://substack.com/home?action=compose&message=' + encodeURIComponent(input.value);
      });

      // Copy to clipboard
      function copyDivToClipboard() {
				var range = document.createRange();
				range.selectNode(document.getElementById("a"));
				window.getSelection().removeAllRanges(); // clear current selection
				window.getSelection().addRange(range); // to select text
				document.execCommand("copy");
				window.getSelection().removeAllRanges();// to deselect
			}

      function openLink() {
				encodedText.select();
        encodedText.setSelectionRange(0, 99999);

				window.open(encodedText.value);
			}
    </script>
  </body>
</html>
